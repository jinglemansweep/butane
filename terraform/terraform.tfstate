{
  "version": 4,
  "terraform_version": "1.7.0",
  "serial": 2,
  "lineage": "30643e11-8a9c-f739-0d20-11841aed70b8",
  "outputs": {
    "hetzner": {
      "value": "{\"ignition\":{\"config\":{\"replace\":{\"verification\":{}}},\"proxy\":{},\"security\":{\"tls\":{}},\"timeouts\":{},\"version\":\"3.4.0\"},\"kernelArguments\":{},\"passwd\":{\"users\":[{\"groups\":[\"sudo\",\"docker\"],\"name\":\"louis\",\"passwordHash\":\"$6$4DcadFC0.wM$.3jy/J4hsDnP55ehJM2zTEWyCrrc.O7m3N2/j2Zohel8n1qQJM73mwmHFFOyuTbp8eZH4XReUyzE1EbyqXx/b.\",\"sshAuthorizedKeys\":[\"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDAPME1Cu6epBXHCAI6pRjhuWC5HprHsqLlrokNRqdpcd/yKvP4KauPGKzZpshG9P/EUJ/ZYCh1diD4CUZgkzY54n2GuDmfxqsnhjkdI9g8Ceu1VsXTLwvW62BVDQgXaVBhds9rd+f+DTIEMqQvCnwkWSnMCPTY/+mi4PqireJgdQ18UXkSGjWtbDb+BgJB9BLI61Wx+eoKe8JMjJjoRhV1xxinS1XlghATh9onddaM6k1uVuLi8hQRYRqbrBwUQ21P+pLQbe6XJLdw65jnThSH/9BJ59ePqpWS+H43fzl9iAyyZFoBV9IVT+P4roEIAIIs1O4Kp02R09azbml8JkON louis@home\"]}]},\"storage\":{\"disks\":[{\"device\":\"/dev/sdb\"}],\"files\":[{\"group\":{},\"path\":\"/etc/systemd/system.conf.d/10-env-base.conf\",\"user\":{},\"contents\":{\"compression\":\"\",\"source\":\"data:,%5BManager%5D%0ADefaultEnvironment%3DFC_TEST_VAR%3Dhello-world%0A\",\"verification\":{}},\"mode\":420}]},\"systemd\":{}}",
      "type": "string"
    },
    "plex": {
      "value": "{\"ignition\":{\"config\":{\"replace\":{\"verification\":{}}},\"proxy\":{},\"security\":{\"tls\":{}},\"timeouts\":{},\"version\":\"3.4.0\"},\"kernelArguments\":{},\"passwd\":{\"users\":[{\"groups\":[\"sudo\",\"docker\"],\"name\":\"louis\",\"passwordHash\":\"$6$4DcadFC0.wM$.3jy/J4hsDnP55ehJM2zTEWyCrrc.O7m3N2/j2Zohel8n1qQJM73mwmHFFOyuTbp8eZH4XReUyzE1EbyqXx/b.\",\"sshAuthorizedKeys\":[\"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDAPME1Cu6epBXHCAI6pRjhuWC5HprHsqLlrokNRqdpcd/yKvP4KauPGKzZpshG9P/EUJ/ZYCh1diD4CUZgkzY54n2GuDmfxqsnhjkdI9g8Ceu1VsXTLwvW62BVDQgXaVBhds9rd+f+DTIEMqQvCnwkWSnMCPTY/+mi4PqireJgdQ18UXkSGjWtbDb+BgJB9BLI61Wx+eoKe8JMjJjoRhV1xxinS1XlghATh9onddaM6k1uVuLi8hQRYRqbrBwUQ21P+pLQbe6XJLdw65jnThSH/9BJ59ePqpWS+H43fzl9iAyyZFoBV9IVT+P4roEIAIIs1O4Kp02R09azbml8JkON louis@home\"]}]},\"storage\":{\"disks\":[{\"device\":\"/dev/vdb\",\"partitions\":[{\"label\":\"mnt_data\",\"number\":1,\"resize\":true,\"sizeMiB\":0}]}],\"files\":[{\"group\":{},\"path\":\"/etc/systemd/system.conf.d/10-env-base.conf\",\"user\":{},\"contents\":{\"compression\":\"\",\"source\":\"data:,%5BManager%5D%0ADefaultEnvironment%3DFC_TEST_VAR%3Dhello-world%0A\",\"verification\":{}},\"mode\":420},{\"group\":{},\"path\":\"/etc/docker/daemon.json\",\"user\":{},\"contents\":{\"compression\":\"\",\"source\":\"data:;base64,ewogICJtZXRyaWNzLWFkZHIiIDogIjAuMC4wLjA6OTMyMyIsCiAgImV4cGVyaW1lbnRhbCIgOiB0cnVlCn0K\",\"verification\":{}},\"mode\":420},{\"group\":{},\"path\":\"/etc/systemd/system.conf.d/11-env-nfs.conf\",\"user\":{},\"contents\":{\"compression\":\"\",\"source\":\"data:,%5BManager%5D%0ADefaultEnvironment%3DFC_NFS_HOST%3D10.0.2.11%0A\",\"verification\":{}},\"mode\":420}],\"filesystems\":[{\"device\":\"/dev/disk/by-partlabel/mnt_data\",\"format\":\"ext4\",\"label\":\"mnt_data\",\"path\":\"/mnt/data\",\"wipeFilesystem\":false}],\"links\":[{\"group\":{},\"overwrite\":true,\"path\":\"/etc/systemd/system/multi-user.target.wants/docker.service\",\"user\":{},\"hard\":false,\"target\":\"/usr/lib/systemd/system/docker.service\"}]},\"systemd\":{\"units\":[{\"contents\":\"# Generated by Butane\\n[Unit]\\nRequires=systemd-fsck@dev-disk-by\\\\x2dpartlabel-mnt_data.service\\nAfter=systemd-fsck@dev-disk-by\\\\x2dpartlabel-mnt_data.service\\n\\n[Mount]\\nWhere=/mnt/data\\nWhat=/dev/disk/by-partlabel/mnt_data\\nType=ext4\\n\\n[Install]\\nRequiredBy=local-fs.target\",\"enabled\":true,\"name\":\"mnt-data.mount\"},{\"enabled\":true,\"name\":\"docker.service\"},{\"contents\":\"[Unit]\\nBefore=remote-fs.target\\n[Mount]\\nWhat=${FC_NFS_HOST}:/volume1/cluster/work\\nWhere=/mnt/nfs/work\\nType=nfs\\n[Install]\\nWantedBy=remote-fs.target\\n\",\"enabled\":true,\"name\":\"mnt-nfs-work.mount\"},{\"contents\":\"[Unit]\\nBefore=remote-fs.target\\n[Mount]\\nWhat=${FC_NFS_HOST}:/volume1/cluster/docker/volumes\\nWhere=/mnt/nfs/volumes\\nType=nfs\\n[Install]\\nWantedBy=remote-fs.target\\n\",\"enabled\":true,\"name\":\"mnt-nfs-volumes.mount\"}]}}",
      "type": "string"
    },
    "swarm_manager": {
      "value": "{\"ignition\":{\"config\":{\"replace\":{\"verification\":{}}},\"proxy\":{},\"security\":{\"tls\":{}},\"timeouts\":{},\"version\":\"3.4.0\"},\"kernelArguments\":{},\"passwd\":{\"users\":[{\"groups\":[\"sudo\",\"docker\"],\"name\":\"louis\",\"passwordHash\":\"$6$4DcadFC0.wM$.3jy/J4hsDnP55ehJM2zTEWyCrrc.O7m3N2/j2Zohel8n1qQJM73mwmHFFOyuTbp8eZH4XReUyzE1EbyqXx/b.\",\"sshAuthorizedKeys\":[\"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDAPME1Cu6epBXHCAI6pRjhuWC5HprHsqLlrokNRqdpcd/yKvP4KauPGKzZpshG9P/EUJ/ZYCh1diD4CUZgkzY54n2GuDmfxqsnhjkdI9g8Ceu1VsXTLwvW62BVDQgXaVBhds9rd+f+DTIEMqQvCnwkWSnMCPTY/+mi4PqireJgdQ18UXkSGjWtbDb+BgJB9BLI61Wx+eoKe8JMjJjoRhV1xxinS1XlghATh9onddaM6k1uVuLi8hQRYRqbrBwUQ21P+pLQbe6XJLdw65jnThSH/9BJ59ePqpWS+H43fzl9iAyyZFoBV9IVT+P4roEIAIIs1O4Kp02R09azbml8JkON louis@home\"]}]},\"storage\":{\"disks\":[{\"device\":\"/dev/vdb\",\"partitions\":[{\"label\":\"mnt_data\",\"number\":1,\"resize\":true,\"sizeMiB\":0}]}],\"files\":[{\"group\":{},\"path\":\"/etc/systemd/system.conf.d/10-env-base.conf\",\"user\":{},\"contents\":{\"compression\":\"\",\"source\":\"data:,%5BManager%5D%0ADefaultEnvironment%3DFC_TEST_VAR%3Dhello-world%0A\",\"verification\":{}},\"mode\":420},{\"group\":{},\"path\":\"/etc/docker/daemon.json\",\"user\":{},\"contents\":{\"compression\":\"\",\"source\":\"data:;base64,ewogICJtZXRyaWNzLWFkZHIiIDogIjAuMC4wLjA6OTMyMyIsCiAgImV4cGVyaW1lbnRhbCIgOiB0cnVlCn0K\",\"verification\":{}},\"mode\":420},{\"group\":{},\"path\":\"/etc/systemd/system.conf.d/11-env-nfs.conf\",\"user\":{},\"contents\":{\"compression\":\"\",\"source\":\"data:,%5BManager%5D%0ADefaultEnvironment%3DFC_NFS_HOST%3D10.0.2.11%0A\",\"verification\":{}},\"mode\":420}],\"filesystems\":[{\"device\":\"/dev/disk/by-partlabel/mnt_data\",\"format\":\"ext4\",\"label\":\"mnt_data\",\"path\":\"/mnt/data\",\"wipeFilesystem\":false}],\"links\":[{\"group\":{},\"overwrite\":true,\"path\":\"/etc/systemd/system/multi-user.target.wants/docker.service\",\"user\":{},\"hard\":false,\"target\":\"/usr/lib/systemd/system/docker.service\"}]},\"systemd\":{\"units\":[{\"contents\":\"# Generated by Butane\\n[Unit]\\nRequires=systemd-fsck@dev-disk-by\\\\x2dpartlabel-mnt_data.service\\nAfter=systemd-fsck@dev-disk-by\\\\x2dpartlabel-mnt_data.service\\n\\n[Mount]\\nWhere=/mnt/data\\nWhat=/dev/disk/by-partlabel/mnt_data\\nType=ext4\\n\\n[Install]\\nRequiredBy=local-fs.target\",\"enabled\":true,\"name\":\"mnt-data.mount\"},{\"enabled\":true,\"name\":\"docker.service\"},{\"contents\":\"[Unit]\\nBefore=remote-fs.target\\n[Mount]\\nWhat=${FC_NFS_HOST}:/volume1/cluster/work\\nWhere=/mnt/nfs/work\\nType=nfs\\n[Install]\\nWantedBy=remote-fs.target\\n\",\"enabled\":true,\"name\":\"mnt-nfs-work.mount\"},{\"contents\":\"[Unit]\\nBefore=remote-fs.target\\n[Mount]\\nWhat=${FC_NFS_HOST}:/volume1/cluster/docker/volumes\\nWhere=/mnt/nfs/volumes\\nType=nfs\\n[Install]\\nWantedBy=remote-fs.target\\n\",\"enabled\":true,\"name\":\"mnt-nfs-volumes.mount\"}]}}",
      "type": "string"
    },
    "swarm_worker": {
      "value": "{\"ignition\":{\"config\":{\"replace\":{\"verification\":{}}},\"proxy\":{},\"security\":{\"tls\":{}},\"timeouts\":{},\"version\":\"3.4.0\"},\"kernelArguments\":{},\"passwd\":{\"users\":[{\"groups\":[\"sudo\",\"docker\"],\"name\":\"louis\",\"passwordHash\":\"$6$4DcadFC0.wM$.3jy/J4hsDnP55ehJM2zTEWyCrrc.O7m3N2/j2Zohel8n1qQJM73mwmHFFOyuTbp8eZH4XReUyzE1EbyqXx/b.\",\"sshAuthorizedKeys\":[\"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDAPME1Cu6epBXHCAI6pRjhuWC5HprHsqLlrokNRqdpcd/yKvP4KauPGKzZpshG9P/EUJ/ZYCh1diD4CUZgkzY54n2GuDmfxqsnhjkdI9g8Ceu1VsXTLwvW62BVDQgXaVBhds9rd+f+DTIEMqQvCnwkWSnMCPTY/+mi4PqireJgdQ18UXkSGjWtbDb+BgJB9BLI61Wx+eoKe8JMjJjoRhV1xxinS1XlghATh9onddaM6k1uVuLi8hQRYRqbrBwUQ21P+pLQbe6XJLdw65jnThSH/9BJ59ePqpWS+H43fzl9iAyyZFoBV9IVT+P4roEIAIIs1O4Kp02R09azbml8JkON louis@home\"]}]},\"storage\":{\"disks\":[{\"device\":\"/dev/vdb\",\"partitions\":[{\"label\":\"mnt_data\",\"number\":1,\"resize\":true,\"sizeMiB\":0}]}],\"files\":[{\"group\":{},\"path\":\"/etc/systemd/system.conf.d/10-env-base.conf\",\"user\":{},\"contents\":{\"compression\":\"\",\"source\":\"data:,%5BManager%5D%0ADefaultEnvironment%3DFC_TEST_VAR%3Dhello-world%0A\",\"verification\":{}},\"mode\":420},{\"group\":{},\"path\":\"/etc/docker/daemon.json\",\"user\":{},\"contents\":{\"compression\":\"\",\"source\":\"data:;base64,ewogICJtZXRyaWNzLWFkZHIiIDogIjAuMC4wLjA6OTMyMyIsCiAgImV4cGVyaW1lbnRhbCIgOiB0cnVlCn0K\",\"verification\":{}},\"mode\":420},{\"group\":{},\"path\":\"/etc/systemd/system.conf.d/11-env-nfs.conf\",\"user\":{},\"contents\":{\"compression\":\"\",\"source\":\"data:,%5BManager%5D%0ADefaultEnvironment%3DFC_NFS_HOST%3D10.0.2.11%0A\",\"verification\":{}},\"mode\":420}],\"filesystems\":[{\"device\":\"/dev/disk/by-partlabel/mnt_data\",\"format\":\"ext4\",\"label\":\"mnt_data\",\"path\":\"/mnt/data\",\"wipeFilesystem\":false}],\"links\":[{\"group\":{},\"overwrite\":true,\"path\":\"/etc/systemd/system/multi-user.target.wants/docker.service\",\"user\":{},\"hard\":false,\"target\":\"/usr/lib/systemd/system/docker.service\"}]},\"systemd\":{\"units\":[{\"contents\":\"# Generated by Butane\\n[Unit]\\nRequires=systemd-fsck@dev-disk-by\\\\x2dpartlabel-mnt_data.service\\nAfter=systemd-fsck@dev-disk-by\\\\x2dpartlabel-mnt_data.service\\n\\n[Mount]\\nWhere=/mnt/data\\nWhat=/dev/disk/by-partlabel/mnt_data\\nType=ext4\\n\\n[Install]\\nRequiredBy=local-fs.target\",\"enabled\":true,\"name\":\"mnt-data.mount\"},{\"enabled\":true,\"name\":\"docker.service\"},{\"contents\":\"[Unit]\\nBefore=remote-fs.target\\n[Mount]\\nWhat=${FC_NFS_HOST}:/volume1/cluster/work\\nWhere=/mnt/nfs/work\\nType=nfs\\n[Install]\\nWantedBy=remote-fs.target\\n\",\"enabled\":true,\"name\":\"mnt-nfs-work.mount\"},{\"contents\":\"[Unit]\\nBefore=remote-fs.target\\n[Mount]\\nWhat=${FC_NFS_HOST}:/volume1/cluster/docker/volumes\\nWhere=/mnt/nfs/volumes\\nType=nfs\\n[Install]\\nWantedBy=remote-fs.target\\n\",\"enabled\":true,\"name\":\"mnt-nfs-volumes.mount\"}]}}",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "data",
      "type": "ct_config",
      "name": "hetzner",
      "provider": "provider[\"registry.terraform.io/poseidon/ct\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "variant: flatcar\nversion: 1.0.0\n\nstorage:\n  disks:\n    - device: /dev/sdb\n\n  files:\n    - path: /etc/systemd/system.conf.d/10-env-base.conf\n      mode: 0644\n      contents:\n        inline: |\n          [Manager]\n          DefaultEnvironment=FC_TEST_VAR=hello-world\n",
            "id": "49129449",
            "pretty_print": false,
            "rendered": "{\"ignition\":{\"config\":{\"replace\":{\"verification\":{}}},\"proxy\":{},\"security\":{\"tls\":{}},\"timeouts\":{},\"version\":\"3.4.0\"},\"kernelArguments\":{},\"passwd\":{\"users\":[{\"groups\":[\"sudo\",\"docker\"],\"name\":\"louis\",\"passwordHash\":\"$6$4DcadFC0.wM$.3jy/J4hsDnP55ehJM2zTEWyCrrc.O7m3N2/j2Zohel8n1qQJM73mwmHFFOyuTbp8eZH4XReUyzE1EbyqXx/b.\",\"sshAuthorizedKeys\":[\"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDAPME1Cu6epBXHCAI6pRjhuWC5HprHsqLlrokNRqdpcd/yKvP4KauPGKzZpshG9P/EUJ/ZYCh1diD4CUZgkzY54n2GuDmfxqsnhjkdI9g8Ceu1VsXTLwvW62BVDQgXaVBhds9rd+f+DTIEMqQvCnwkWSnMCPTY/+mi4PqireJgdQ18UXkSGjWtbDb+BgJB9BLI61Wx+eoKe8JMjJjoRhV1xxinS1XlghATh9onddaM6k1uVuLi8hQRYRqbrBwUQ21P+pLQbe6XJLdw65jnThSH/9BJ59ePqpWS+H43fzl9iAyyZFoBV9IVT+P4roEIAIIs1O4Kp02R09azbml8JkON louis@home\"]}]},\"storage\":{\"disks\":[{\"device\":\"/dev/sdb\"}],\"files\":[{\"group\":{},\"path\":\"/etc/systemd/system.conf.d/10-env-base.conf\",\"user\":{},\"contents\":{\"compression\":\"\",\"source\":\"data:,%5BManager%5D%0ADefaultEnvironment%3DFC_TEST_VAR%3Dhello-world%0A\",\"verification\":{}},\"mode\":420}]},\"systemd\":{}}",
            "snippets": [
              "variant: flatcar\nversion: 1.0.0\n\npasswd:\n  users:\n    - name: louis\n      ssh_authorized_keys:\n        - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDAPME1Cu6epBXHCAI6pRjhuWC5HprHsqLlrokNRqdpcd/yKvP4KauPGKzZpshG9P/EUJ/ZYCh1diD4CUZgkzY54n2GuDmfxqsnhjkdI9g8Ceu1VsXTLwvW62BVDQgXaVBhds9rd+f+DTIEMqQvCnwkWSnMCPTY/+mi4PqireJgdQ18UXkSGjWtbDb+BgJB9BLI61Wx+eoKe8JMjJjoRhV1xxinS1XlghATh9onddaM6k1uVuLi8hQRYRqbrBwUQ21P+pLQbe6XJLdw65jnThSH/9BJ59ePqpWS+H43fzl9iAyyZFoBV9IVT+P4roEIAIIs1O4Kp02R09azbml8JkON louis@home\n      password_hash: \"$6$4DcadFC0.wM$.3jy/J4hsDnP55ehJM2zTEWyCrrc.O7m3N2/j2Zohel8n1qQJM73mwmHFFOyuTbp8eZH4XReUyzE1EbyqXx/b.\"\n      groups: [sudo, docker]\n"
            ],
            "strict": true
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "ct_config",
      "name": "plex",
      "provider": "provider[\"registry.terraform.io/poseidon/ct\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "variant: flatcar\nversion: 1.0.0\n\nstorage:\n  disks:\n    - device: /dev/vdb\n\n  files:\n    - path: /etc/systemd/system.conf.d/10-env-base.conf\n      mode: 0644\n      contents:\n        inline: |\n          [Manager]\n          DefaultEnvironment=FC_TEST_VAR=hello-world\n",
            "id": "2119343032",
            "pretty_print": false,
            "rendered": "{\"ignition\":{\"config\":{\"replace\":{\"verification\":{}}},\"proxy\":{},\"security\":{\"tls\":{}},\"timeouts\":{},\"version\":\"3.4.0\"},\"kernelArguments\":{},\"passwd\":{\"users\":[{\"groups\":[\"sudo\",\"docker\"],\"name\":\"louis\",\"passwordHash\":\"$6$4DcadFC0.wM$.3jy/J4hsDnP55ehJM2zTEWyCrrc.O7m3N2/j2Zohel8n1qQJM73mwmHFFOyuTbp8eZH4XReUyzE1EbyqXx/b.\",\"sshAuthorizedKeys\":[\"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDAPME1Cu6epBXHCAI6pRjhuWC5HprHsqLlrokNRqdpcd/yKvP4KauPGKzZpshG9P/EUJ/ZYCh1diD4CUZgkzY54n2GuDmfxqsnhjkdI9g8Ceu1VsXTLwvW62BVDQgXaVBhds9rd+f+DTIEMqQvCnwkWSnMCPTY/+mi4PqireJgdQ18UXkSGjWtbDb+BgJB9BLI61Wx+eoKe8JMjJjoRhV1xxinS1XlghATh9onddaM6k1uVuLi8hQRYRqbrBwUQ21P+pLQbe6XJLdw65jnThSH/9BJ59ePqpWS+H43fzl9iAyyZFoBV9IVT+P4roEIAIIs1O4Kp02R09azbml8JkON louis@home\"]}]},\"storage\":{\"disks\":[{\"device\":\"/dev/vdb\",\"partitions\":[{\"label\":\"mnt_data\",\"number\":1,\"resize\":true,\"sizeMiB\":0}]}],\"files\":[{\"group\":{},\"path\":\"/etc/systemd/system.conf.d/10-env-base.conf\",\"user\":{},\"contents\":{\"compression\":\"\",\"source\":\"data:,%5BManager%5D%0ADefaultEnvironment%3DFC_TEST_VAR%3Dhello-world%0A\",\"verification\":{}},\"mode\":420},{\"group\":{},\"path\":\"/etc/docker/daemon.json\",\"user\":{},\"contents\":{\"compression\":\"\",\"source\":\"data:;base64,ewogICJtZXRyaWNzLWFkZHIiIDogIjAuMC4wLjA6OTMyMyIsCiAgImV4cGVyaW1lbnRhbCIgOiB0cnVlCn0K\",\"verification\":{}},\"mode\":420},{\"group\":{},\"path\":\"/etc/systemd/system.conf.d/11-env-nfs.conf\",\"user\":{},\"contents\":{\"compression\":\"\",\"source\":\"data:,%5BManager%5D%0ADefaultEnvironment%3DFC_NFS_HOST%3D10.0.2.11%0A\",\"verification\":{}},\"mode\":420}],\"filesystems\":[{\"device\":\"/dev/disk/by-partlabel/mnt_data\",\"format\":\"ext4\",\"label\":\"mnt_data\",\"path\":\"/mnt/data\",\"wipeFilesystem\":false}],\"links\":[{\"group\":{},\"overwrite\":true,\"path\":\"/etc/systemd/system/multi-user.target.wants/docker.service\",\"user\":{},\"hard\":false,\"target\":\"/usr/lib/systemd/system/docker.service\"}]},\"systemd\":{\"units\":[{\"contents\":\"# Generated by Butane\\n[Unit]\\nRequires=systemd-fsck@dev-disk-by\\\\x2dpartlabel-mnt_data.service\\nAfter=systemd-fsck@dev-disk-by\\\\x2dpartlabel-mnt_data.service\\n\\n[Mount]\\nWhere=/mnt/data\\nWhat=/dev/disk/by-partlabel/mnt_data\\nType=ext4\\n\\n[Install]\\nRequiredBy=local-fs.target\",\"enabled\":true,\"name\":\"mnt-data.mount\"},{\"enabled\":true,\"name\":\"docker.service\"},{\"contents\":\"[Unit]\\nBefore=remote-fs.target\\n[Mount]\\nWhat=${FC_NFS_HOST}:/volume1/cluster/work\\nWhere=/mnt/nfs/work\\nType=nfs\\n[Install]\\nWantedBy=remote-fs.target\\n\",\"enabled\":true,\"name\":\"mnt-nfs-work.mount\"},{\"contents\":\"[Unit]\\nBefore=remote-fs.target\\n[Mount]\\nWhat=${FC_NFS_HOST}:/volume1/cluster/docker/volumes\\nWhere=/mnt/nfs/volumes\\nType=nfs\\n[Install]\\nWantedBy=remote-fs.target\\n\",\"enabled\":true,\"name\":\"mnt-nfs-volumes.mount\"}]}}",
            "snippets": [
              "variant: flatcar\nversion: 1.0.0\n\npasswd:\n  users:\n    - name: louis\n      ssh_authorized_keys:\n        - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDAPME1Cu6epBXHCAI6pRjhuWC5HprHsqLlrokNRqdpcd/yKvP4KauPGKzZpshG9P/EUJ/ZYCh1diD4CUZgkzY54n2GuDmfxqsnhjkdI9g8Ceu1VsXTLwvW62BVDQgXaVBhds9rd+f+DTIEMqQvCnwkWSnMCPTY/+mi4PqireJgdQ18UXkSGjWtbDb+BgJB9BLI61Wx+eoKe8JMjJjoRhV1xxinS1XlghATh9onddaM6k1uVuLi8hQRYRqbrBwUQ21P+pLQbe6XJLdw65jnThSH/9BJ59ePqpWS+H43fzl9iAyyZFoBV9IVT+P4roEIAIIs1O4Kp02R09azbml8JkON louis@home\n      password_hash: \"$6$4DcadFC0.wM$.3jy/J4hsDnP55ehJM2zTEWyCrrc.O7m3N2/j2Zohel8n1qQJM73mwmHFFOyuTbp8eZH4XReUyzE1EbyqXx/b.\"\n      groups: [sudo, docker]\n",
              "variant: flatcar\nversion: 1.0.0\n\nstorage:\n  disks:\n    - device: /dev/vdb\n      partitions:\n        - number: 1\n          label: mnt_data\n          resize: true\n          size_mib: 0\n\n  filesystems:\n    - path: /mnt/data\n      device: /dev/disk/by-partlabel/mnt_data\n      format: ext4\n      wipe_filesystem: false\n      label: mnt_data\n      with_mount_unit: true\n\n  files:\n    - path: /etc/docker/daemon.json\n      mode: 0644\n      contents:\n        inline: |\n          {\n            \"metrics-addr\" : \"0.0.0.0:9323\",\n            \"experimental\" : true\n          }\n          \n  links:\n    - path: /etc/systemd/system/multi-user.target.wants/docker.service\n      target: /usr/lib/systemd/system/docker.service\n      hard: false\n      overwrite: true\n\nsystemd:\n  units:\n    - name: docker.service\n      enabled: true\n\n",
              "variant: flatcar\nversion: 1.0.0\n\nstorage:\n  files:\n    - path: /etc/systemd/system.conf.d/11-env-nfs.conf\n      mode: 0644\n      contents:\n        inline: |\n          [Manager]\n          DefaultEnvironment=FC_NFS_HOST=10.0.2.11\n\nsystemd:\n  units:\n    - name: mnt-nfs-work.mount\n      enabled: true\n      contents: |\n        [Unit]\n        Before=remote-fs.target\n        [Mount]\n        What=${FC_NFS_HOST}:/volume1/cluster/work\n        Where=/mnt/nfs/work\n        Type=nfs\n        [Install]\n        WantedBy=remote-fs.target\n\n    - name: mnt-nfs-volumes.mount\n      enabled: true\n      contents: |\n        [Unit]\n        Before=remote-fs.target\n        [Mount]\n        What=${FC_NFS_HOST}:/volume1/cluster/docker/volumes\n        Where=/mnt/nfs/volumes\n        Type=nfs\n        [Install]\n        WantedBy=remote-fs.target\n"
            ],
            "strict": true
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "ct_config",
      "name": "swarm_manager",
      "provider": "provider[\"registry.terraform.io/poseidon/ct\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "variant: flatcar\nversion: 1.0.0\n\nstorage:\n  disks:\n    - device: /dev/vdb\n\n  files:\n    - path: /etc/systemd/system.conf.d/10-env-base.conf\n      mode: 0644\n      contents:\n        inline: |\n          [Manager]\n          DefaultEnvironment=FC_TEST_VAR=hello-world\n",
            "id": "2119343032",
            "pretty_print": false,
            "rendered": "{\"ignition\":{\"config\":{\"replace\":{\"verification\":{}}},\"proxy\":{},\"security\":{\"tls\":{}},\"timeouts\":{},\"version\":\"3.4.0\"},\"kernelArguments\":{},\"passwd\":{\"users\":[{\"groups\":[\"sudo\",\"docker\"],\"name\":\"louis\",\"passwordHash\":\"$6$4DcadFC0.wM$.3jy/J4hsDnP55ehJM2zTEWyCrrc.O7m3N2/j2Zohel8n1qQJM73mwmHFFOyuTbp8eZH4XReUyzE1EbyqXx/b.\",\"sshAuthorizedKeys\":[\"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDAPME1Cu6epBXHCAI6pRjhuWC5HprHsqLlrokNRqdpcd/yKvP4KauPGKzZpshG9P/EUJ/ZYCh1diD4CUZgkzY54n2GuDmfxqsnhjkdI9g8Ceu1VsXTLwvW62BVDQgXaVBhds9rd+f+DTIEMqQvCnwkWSnMCPTY/+mi4PqireJgdQ18UXkSGjWtbDb+BgJB9BLI61Wx+eoKe8JMjJjoRhV1xxinS1XlghATh9onddaM6k1uVuLi8hQRYRqbrBwUQ21P+pLQbe6XJLdw65jnThSH/9BJ59ePqpWS+H43fzl9iAyyZFoBV9IVT+P4roEIAIIs1O4Kp02R09azbml8JkON louis@home\"]}]},\"storage\":{\"disks\":[{\"device\":\"/dev/vdb\",\"partitions\":[{\"label\":\"mnt_data\",\"number\":1,\"resize\":true,\"sizeMiB\":0}]}],\"files\":[{\"group\":{},\"path\":\"/etc/systemd/system.conf.d/10-env-base.conf\",\"user\":{},\"contents\":{\"compression\":\"\",\"source\":\"data:,%5BManager%5D%0ADefaultEnvironment%3DFC_TEST_VAR%3Dhello-world%0A\",\"verification\":{}},\"mode\":420},{\"group\":{},\"path\":\"/etc/docker/daemon.json\",\"user\":{},\"contents\":{\"compression\":\"\",\"source\":\"data:;base64,ewogICJtZXRyaWNzLWFkZHIiIDogIjAuMC4wLjA6OTMyMyIsCiAgImV4cGVyaW1lbnRhbCIgOiB0cnVlCn0K\",\"verification\":{}},\"mode\":420},{\"group\":{},\"path\":\"/etc/systemd/system.conf.d/11-env-nfs.conf\",\"user\":{},\"contents\":{\"compression\":\"\",\"source\":\"data:,%5BManager%5D%0ADefaultEnvironment%3DFC_NFS_HOST%3D10.0.2.11%0A\",\"verification\":{}},\"mode\":420}],\"filesystems\":[{\"device\":\"/dev/disk/by-partlabel/mnt_data\",\"format\":\"ext4\",\"label\":\"mnt_data\",\"path\":\"/mnt/data\",\"wipeFilesystem\":false}],\"links\":[{\"group\":{},\"overwrite\":true,\"path\":\"/etc/systemd/system/multi-user.target.wants/docker.service\",\"user\":{},\"hard\":false,\"target\":\"/usr/lib/systemd/system/docker.service\"}]},\"systemd\":{\"units\":[{\"contents\":\"# Generated by Butane\\n[Unit]\\nRequires=systemd-fsck@dev-disk-by\\\\x2dpartlabel-mnt_data.service\\nAfter=systemd-fsck@dev-disk-by\\\\x2dpartlabel-mnt_data.service\\n\\n[Mount]\\nWhere=/mnt/data\\nWhat=/dev/disk/by-partlabel/mnt_data\\nType=ext4\\n\\n[Install]\\nRequiredBy=local-fs.target\",\"enabled\":true,\"name\":\"mnt-data.mount\"},{\"enabled\":true,\"name\":\"docker.service\"},{\"contents\":\"[Unit]\\nBefore=remote-fs.target\\n[Mount]\\nWhat=${FC_NFS_HOST}:/volume1/cluster/work\\nWhere=/mnt/nfs/work\\nType=nfs\\n[Install]\\nWantedBy=remote-fs.target\\n\",\"enabled\":true,\"name\":\"mnt-nfs-work.mount\"},{\"contents\":\"[Unit]\\nBefore=remote-fs.target\\n[Mount]\\nWhat=${FC_NFS_HOST}:/volume1/cluster/docker/volumes\\nWhere=/mnt/nfs/volumes\\nType=nfs\\n[Install]\\nWantedBy=remote-fs.target\\n\",\"enabled\":true,\"name\":\"mnt-nfs-volumes.mount\"}]}}",
            "snippets": [
              "variant: flatcar\nversion: 1.0.0\n\npasswd:\n  users:\n    - name: louis\n      ssh_authorized_keys:\n        - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDAPME1Cu6epBXHCAI6pRjhuWC5HprHsqLlrokNRqdpcd/yKvP4KauPGKzZpshG9P/EUJ/ZYCh1diD4CUZgkzY54n2GuDmfxqsnhjkdI9g8Ceu1VsXTLwvW62BVDQgXaVBhds9rd+f+DTIEMqQvCnwkWSnMCPTY/+mi4PqireJgdQ18UXkSGjWtbDb+BgJB9BLI61Wx+eoKe8JMjJjoRhV1xxinS1XlghATh9onddaM6k1uVuLi8hQRYRqbrBwUQ21P+pLQbe6XJLdw65jnThSH/9BJ59ePqpWS+H43fzl9iAyyZFoBV9IVT+P4roEIAIIs1O4Kp02R09azbml8JkON louis@home\n      password_hash: \"$6$4DcadFC0.wM$.3jy/J4hsDnP55ehJM2zTEWyCrrc.O7m3N2/j2Zohel8n1qQJM73mwmHFFOyuTbp8eZH4XReUyzE1EbyqXx/b.\"\n      groups: [sudo, docker]\n",
              "variant: flatcar\nversion: 1.0.0\n\nstorage:\n  disks:\n    - device: /dev/vdb\n      partitions:\n        - number: 1\n          label: mnt_data\n          resize: true\n          size_mib: 0\n\n  filesystems:\n    - path: /mnt/data\n      device: /dev/disk/by-partlabel/mnt_data\n      format: ext4\n      wipe_filesystem: false\n      label: mnt_data\n      with_mount_unit: true\n\n  files:\n    - path: /etc/docker/daemon.json\n      mode: 0644\n      contents:\n        inline: |\n          {\n            \"metrics-addr\" : \"0.0.0.0:9323\",\n            \"experimental\" : true\n          }\n          \n  links:\n    - path: /etc/systemd/system/multi-user.target.wants/docker.service\n      target: /usr/lib/systemd/system/docker.service\n      hard: false\n      overwrite: true\n\nsystemd:\n  units:\n    - name: docker.service\n      enabled: true\n\n",
              "variant: flatcar\nversion: 1.0.0\n\nstorage:\n  files:\n    - path: /etc/systemd/system.conf.d/11-env-nfs.conf\n      mode: 0644\n      contents:\n        inline: |\n          [Manager]\n          DefaultEnvironment=FC_NFS_HOST=10.0.2.11\n\nsystemd:\n  units:\n    - name: mnt-nfs-work.mount\n      enabled: true\n      contents: |\n        [Unit]\n        Before=remote-fs.target\n        [Mount]\n        What=${FC_NFS_HOST}:/volume1/cluster/work\n        Where=/mnt/nfs/work\n        Type=nfs\n        [Install]\n        WantedBy=remote-fs.target\n\n    - name: mnt-nfs-volumes.mount\n      enabled: true\n      contents: |\n        [Unit]\n        Before=remote-fs.target\n        [Mount]\n        What=${FC_NFS_HOST}:/volume1/cluster/docker/volumes\n        Where=/mnt/nfs/volumes\n        Type=nfs\n        [Install]\n        WantedBy=remote-fs.target\n"
            ],
            "strict": true
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "ct_config",
      "name": "swarm_worker",
      "provider": "provider[\"registry.terraform.io/poseidon/ct\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "variant: flatcar\nversion: 1.0.0\n\nstorage:\n  disks:\n    - device: /dev/vdb\n\n  files:\n    - path: /etc/systemd/system.conf.d/10-env-base.conf\n      mode: 0644\n      contents:\n        inline: |\n          [Manager]\n          DefaultEnvironment=FC_TEST_VAR=hello-world\n",
            "id": "2119343032",
            "pretty_print": false,
            "rendered": "{\"ignition\":{\"config\":{\"replace\":{\"verification\":{}}},\"proxy\":{},\"security\":{\"tls\":{}},\"timeouts\":{},\"version\":\"3.4.0\"},\"kernelArguments\":{},\"passwd\":{\"users\":[{\"groups\":[\"sudo\",\"docker\"],\"name\":\"louis\",\"passwordHash\":\"$6$4DcadFC0.wM$.3jy/J4hsDnP55ehJM2zTEWyCrrc.O7m3N2/j2Zohel8n1qQJM73mwmHFFOyuTbp8eZH4XReUyzE1EbyqXx/b.\",\"sshAuthorizedKeys\":[\"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDAPME1Cu6epBXHCAI6pRjhuWC5HprHsqLlrokNRqdpcd/yKvP4KauPGKzZpshG9P/EUJ/ZYCh1diD4CUZgkzY54n2GuDmfxqsnhjkdI9g8Ceu1VsXTLwvW62BVDQgXaVBhds9rd+f+DTIEMqQvCnwkWSnMCPTY/+mi4PqireJgdQ18UXkSGjWtbDb+BgJB9BLI61Wx+eoKe8JMjJjoRhV1xxinS1XlghATh9onddaM6k1uVuLi8hQRYRqbrBwUQ21P+pLQbe6XJLdw65jnThSH/9BJ59ePqpWS+H43fzl9iAyyZFoBV9IVT+P4roEIAIIs1O4Kp02R09azbml8JkON louis@home\"]}]},\"storage\":{\"disks\":[{\"device\":\"/dev/vdb\",\"partitions\":[{\"label\":\"mnt_data\",\"number\":1,\"resize\":true,\"sizeMiB\":0}]}],\"files\":[{\"group\":{},\"path\":\"/etc/systemd/system.conf.d/10-env-base.conf\",\"user\":{},\"contents\":{\"compression\":\"\",\"source\":\"data:,%5BManager%5D%0ADefaultEnvironment%3DFC_TEST_VAR%3Dhello-world%0A\",\"verification\":{}},\"mode\":420},{\"group\":{},\"path\":\"/etc/docker/daemon.json\",\"user\":{},\"contents\":{\"compression\":\"\",\"source\":\"data:;base64,ewogICJtZXRyaWNzLWFkZHIiIDogIjAuMC4wLjA6OTMyMyIsCiAgImV4cGVyaW1lbnRhbCIgOiB0cnVlCn0K\",\"verification\":{}},\"mode\":420},{\"group\":{},\"path\":\"/etc/systemd/system.conf.d/11-env-nfs.conf\",\"user\":{},\"contents\":{\"compression\":\"\",\"source\":\"data:,%5BManager%5D%0ADefaultEnvironment%3DFC_NFS_HOST%3D10.0.2.11%0A\",\"verification\":{}},\"mode\":420}],\"filesystems\":[{\"device\":\"/dev/disk/by-partlabel/mnt_data\",\"format\":\"ext4\",\"label\":\"mnt_data\",\"path\":\"/mnt/data\",\"wipeFilesystem\":false}],\"links\":[{\"group\":{},\"overwrite\":true,\"path\":\"/etc/systemd/system/multi-user.target.wants/docker.service\",\"user\":{},\"hard\":false,\"target\":\"/usr/lib/systemd/system/docker.service\"}]},\"systemd\":{\"units\":[{\"contents\":\"# Generated by Butane\\n[Unit]\\nRequires=systemd-fsck@dev-disk-by\\\\x2dpartlabel-mnt_data.service\\nAfter=systemd-fsck@dev-disk-by\\\\x2dpartlabel-mnt_data.service\\n\\n[Mount]\\nWhere=/mnt/data\\nWhat=/dev/disk/by-partlabel/mnt_data\\nType=ext4\\n\\n[Install]\\nRequiredBy=local-fs.target\",\"enabled\":true,\"name\":\"mnt-data.mount\"},{\"enabled\":true,\"name\":\"docker.service\"},{\"contents\":\"[Unit]\\nBefore=remote-fs.target\\n[Mount]\\nWhat=${FC_NFS_HOST}:/volume1/cluster/work\\nWhere=/mnt/nfs/work\\nType=nfs\\n[Install]\\nWantedBy=remote-fs.target\\n\",\"enabled\":true,\"name\":\"mnt-nfs-work.mount\"},{\"contents\":\"[Unit]\\nBefore=remote-fs.target\\n[Mount]\\nWhat=${FC_NFS_HOST}:/volume1/cluster/docker/volumes\\nWhere=/mnt/nfs/volumes\\nType=nfs\\n[Install]\\nWantedBy=remote-fs.target\\n\",\"enabled\":true,\"name\":\"mnt-nfs-volumes.mount\"}]}}",
            "snippets": [
              "variant: flatcar\nversion: 1.0.0\n\npasswd:\n  users:\n    - name: louis\n      ssh_authorized_keys:\n        - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDAPME1Cu6epBXHCAI6pRjhuWC5HprHsqLlrokNRqdpcd/yKvP4KauPGKzZpshG9P/EUJ/ZYCh1diD4CUZgkzY54n2GuDmfxqsnhjkdI9g8Ceu1VsXTLwvW62BVDQgXaVBhds9rd+f+DTIEMqQvCnwkWSnMCPTY/+mi4PqireJgdQ18UXkSGjWtbDb+BgJB9BLI61Wx+eoKe8JMjJjoRhV1xxinS1XlghATh9onddaM6k1uVuLi8hQRYRqbrBwUQ21P+pLQbe6XJLdw65jnThSH/9BJ59ePqpWS+H43fzl9iAyyZFoBV9IVT+P4roEIAIIs1O4Kp02R09azbml8JkON louis@home\n      password_hash: \"$6$4DcadFC0.wM$.3jy/J4hsDnP55ehJM2zTEWyCrrc.O7m3N2/j2Zohel8n1qQJM73mwmHFFOyuTbp8eZH4XReUyzE1EbyqXx/b.\"\n      groups: [sudo, docker]\n",
              "variant: flatcar\nversion: 1.0.0\n\nstorage:\n  disks:\n    - device: /dev/vdb\n      partitions:\n        - number: 1\n          label: mnt_data\n          resize: true\n          size_mib: 0\n\n  filesystems:\n    - path: /mnt/data\n      device: /dev/disk/by-partlabel/mnt_data\n      format: ext4\n      wipe_filesystem: false\n      label: mnt_data\n      with_mount_unit: true\n\n  files:\n    - path: /etc/docker/daemon.json\n      mode: 0644\n      contents:\n        inline: |\n          {\n            \"metrics-addr\" : \"0.0.0.0:9323\",\n            \"experimental\" : true\n          }\n          \n  links:\n    - path: /etc/systemd/system/multi-user.target.wants/docker.service\n      target: /usr/lib/systemd/system/docker.service\n      hard: false\n      overwrite: true\n\nsystemd:\n  units:\n    - name: docker.service\n      enabled: true\n\n",
              "variant: flatcar\nversion: 1.0.0\n\nstorage:\n  files:\n    - path: /etc/systemd/system.conf.d/11-env-nfs.conf\n      mode: 0644\n      contents:\n        inline: |\n          [Manager]\n          DefaultEnvironment=FC_NFS_HOST=10.0.2.11\n\nsystemd:\n  units:\n    - name: mnt-nfs-work.mount\n      enabled: true\n      contents: |\n        [Unit]\n        Before=remote-fs.target\n        [Mount]\n        What=${FC_NFS_HOST}:/volume1/cluster/work\n        Where=/mnt/nfs/work\n        Type=nfs\n        [Install]\n        WantedBy=remote-fs.target\n\n    - name: mnt-nfs-volumes.mount\n      enabled: true\n      contents: |\n        [Unit]\n        Before=remote-fs.target\n        [Mount]\n        What=${FC_NFS_HOST}:/volume1/cluster/docker/volumes\n        Where=/mnt/nfs/volumes\n        Type=nfs\n        [Install]\n        WantedBy=remote-fs.target\n"
            ],
            "strict": true
          },
          "sensitive_attributes": []
        }
      ]
    }
  ],
  "check_results": null
}
